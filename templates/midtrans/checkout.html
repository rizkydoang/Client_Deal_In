{% extends 'master/base-content.html' %}
{% load static %}
{% block content %}

{% if response.status == 200 %}
{% for i in response.item %}
<div class="top_brand_left">
    <div class="hover14_check column">
        <div class="agile_top_brand_left_grid">
            <div class="agile_top_brand_left_grid_pos">
                <img src="{% static 'images/offer.png' %}" alt=" " class="img-responsive" />
            </div>
            <div class="agile_top_brand_left_grid1">
                <figure>
                    <div class="snipcart-item block">
                        <div class="snipcart-thumb">
                            <a href="products.html"><img title=" " class="img_item" alt=" "
                                    src="{{i.photo_item}}" /></a>
                            <p>{{response.trans.description}}</p>
                            <h4 style="text-align: left; margin-left: 15px;">Total Pembayaran : Rp. {{response.trans.total}}
                            </h4>
                            <!-- <h4 style="text-align: right; margin-right: 15px;">
                                {{response.trans.description}}</h4> -->
                        </div>
                        <div class="snipcart-details top_brand_home_details">
                            <input type="button" id="pay-button" value="Bayar" class="button" />
                        </div>
                    </div>
                </figure>
            </div>
        </div>
    </div>
</div>
{% endfor %}
{% else %}
{% for i in response.item %}
<div class="top_brand_left">
    <div class="hover14_check column">
        <div class="agile_top_brand_left_grid">
            <div class="agile_top_brand_left_grid_pos">
                <img src="{% static 'images/offer.png' %}" alt=" " class="img-responsive" />
            </div>
            <div class="agile_top_brand_left_grid1">
                <figure>
                    <div class="snipcart-item block">
                        <div class="snipcart-thumb">
                            <a href="products.html"><img title=" " class="img_item" alt=" "
                                    src="{{i.photo_item}}" /></a>
                            {% for j in response.trans %}
                            <p>{{j.description}}</p>
                            <h4 style="text-align: left; margin-left: 15px;">Total Pembayaran : Rp. {{j.total}}
                            </h4>
                            {% endfor %}
                            <!-- <h4 style="text-align: right; margin-right: 15px;">
                                {{response.trans.description}}</h4> -->
                        </div>
                        <div class="snipcart-details top_brand_home_details">
                            <input type="button" id="pay-button" value="Bayar" class="button" />
                        </div>
                    </div>
                </figure>
            </div>
        </div>
    </div>
</div>
{% endfor %}
{% endif %}

<!-- TODO: Remove ".sandbox" from script src URL for production environment. Also input your client key in "data-client-key" -->
<script src="https://app.sandbox.midtrans.com/snap/snap.js" data-client-key="SB-Mid-client-yGhwiv7UtUKsEssD"></script>
<script type="text/javascript">
    document.getElementById('pay-button').onclick = function () {
        // SnapToken acquired from previous step
        snap.pay('{{token}}', {
            // Optional
            onSuccess: function (result) {
                /* You may add your own js here, this is just example */
                document.getElementById('result-json').innerHTML += JSON.stringify(result, null, 2);
            },
            // Optional
            onPending: function (result) {
                /* You may add your own js here, this is just example */
                document.getElementById('result-json').innerHTML += JSON.stringify(result, null, 2);
            },
            // Optional
            onError: function (result) {
                /* You may add your own js here, this is just example */
                document.getElementById('result-json').innerHTML += JSON.stringify(result, null, 2);
            }
        });
    };
</script>
{% endblock content %}
